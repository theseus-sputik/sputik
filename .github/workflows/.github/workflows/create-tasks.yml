name: 批量创建 Sputik 任务 Issues
on:
  workflow_dispatch:  # 手动触发（网页点击 Run）

jobs:
  create-issues:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: 创建 Issues
      uses: actions/github-script@v7
      with:
        script: |
          const tasks = [
{title: '[Init] 设置默认 shell 和 TTY 通道', labels: ['init', 'tty'], body: '**Phase**: Init\n**Difficulty**: Easy\n**Goal**: TTY 初始化。\n**AC**:\n- [ ] Shell 启动。'},
{title: '[Init] 初始化选择机制和事件准备', labels: ['init', 'select'], body: '**Phase**: Init\n**Difficulty**: Easy\n**Goal**: 剪贴板准备。\n**AC**:\n- [ ] 选择状态 OK。'},
{title: '[Window] 连接 X11 并加载字体/颜色', labels: ['window', 'x11'], body: '**Phase**: Window\n**Difficulty**: Medium\n**Goal**: 字体加载。\n**AC**:\n- [ ] 颜色表配置。'},
{title: '[Window] 配置窗口属性和输入法支持', labels: ['window', 'ui'], body: '**Phase**: Window\n**Difficulty**: Medium\n**Goal**: IME 支持。\n**AC**:\n- [ ] 窗口 resize 测试。'},
{title: '[Window] 初始化绘图上下文和鼠标游标', labels: ['window', 'render'], body: '**Phase**: Window\n**Difficulty**: Easy\n**Goal**: 游标设置。\n**AC**:\n- [ ] 绘图上下文创建。'},
{title: '[Loop] 监听 X11/TTY 事件和输入', labels: ['loop', 'events'], body: '**Phase**: Loop\n**Difficulty**: Medium\n**Goal**: 事件监听。\n**AC**:\n- [ ] 键盘事件捕获。'},
{title: '[Loop] 处理事件触发和屏幕重绘', labels: ['loop', 'redraw'], body: '**Phase**: Loop\n**Difficulty**: Medium\n**Goal**: 重绘逻辑。\n**AC**:\n- [ ] 无闪烁。'},
{title: '[Loop] 优化延迟渲染和闪烁机制', labels: ['loop', 'perf'], body: '**Phase**: Loop\n**Difficulty**: Hard\n**Goal**: 性能优化。\n**AC**:\n- [ ] 延迟 < 33ms。'},
{title: '[Render] 遍历行文本生成 glyph 规格', labels: ['render', 'glyph'], body: '**Phase**: Render\n**Difficulty**: Medium\n**Goal**: Glyph 生成。\n**AC**:\n- [ ] 字符渲染正确。'},
{title: '[Render] 处理字符字体/颜色/样式', labels: ['render', 'style'], body: '**Phase**: Render\n**Difficulty**: Medium\n**Goal**: 样式应用。\n**AC**:\n- [ ] 粗体/颜色支持。'},
{title: '[Render] 绘制光标和清理边框', labels: ['render', 'cursor'], body: '**Phase**: Render\n**Difficulty**: Easy\n**Goal**: 光标绘制。\n**AC**:\n- [ ] 边框无残留。'},
{title: '[Render] 缓冲区复制到窗口（优化内存）', labels: ['render', 'perf'], body: '**Phase**: Render\n**Difficulty**: Hard\n**Goal**: 内存优化。\n**AC**:\n- [ ] 占用 < 10MB。'},
{title: '[Input] 捕获键盘事件和快捷键匹配', labels: ['input', 'keyboard'], body: '**Phase**: Input\n**Difficulty**: Medium\n**Goal**: 快捷键处理。\n**AC**:\n- [ ] Ctrl+C 复制。'},
{title: '[Input] 处理鼠标事件和选择操作', labels: ['input', 'mouse'], body: '**Phase**: Input\n**Difficulty**: Medium\n**Goal**: 鼠标拖选。\n**AC**:\n- [ ] 选择高亮。'},
{title: '[Input] 支持输入法和特殊键序列', labels: ['input', 'ime'], body: '**Phase**: Input\n**Difficulty**: Hard\n**Goal**: IME/方向键。\n**AC**:\n- [ ] 中文输入测试。'},
{title: '[TTY] 创建 TTY 并启动 shell/命令', labels: ['tty', 'io'], body: '**Phase**: TTY\n**Difficulty**: Easy\n**Goal**: TTY 创建。\n**AC**:\n- [ ] Shell 交互。'},
{title: '[TTY] 读取/写入 TTY 数据更新缓冲', labels: ['tty', 'buffer'], body: '**Phase**: TTY\n**Difficulty**: Medium\n**Goal**: I/O 更新。\n**AC**:\n- [ ] 输出实时显示。'},
{title: '[TTY] 调整大小和特殊模式设置', labels: ['tty', 'resize'], body: '**Phase**: TTY\n**Difficulty**: Easy\n**Goal**: Resize 处理。\n**AC**:\n- [ ] 窗口调整无错。'},
{title: '[Select] 记录选择范围和矩形模式', labels: ['select', 'clipboard'], body: '**Phase**: Select\n**Difficulty**: Medium\n**Goal**: 范围记录。\n**AC**:\n- [ ] 矩形选 (Alt)。'},
{title: '[Select] 复制/粘贴到剪贴板', labels: ['select', 'copy'], body: '**Phase**: Select\n**Difficulty**: Easy\n**Goal**: 复制逻辑。\n**AC**:\n- [ ] Primary 剪贴板。'},
{title: '[Select] 处理 X11 剪贴板事件', labels: ['select', 'x11'], body: '**Phase**: Select\n**Difficulty**: Medium\n**Goal**: X11 事件。\n**AC**:\n- [ ] 跨应用粘贴。'},
{title: '[State] 处理窗口事件（如 resize/focus）', labels: ['state', 'window'], body: '**Phase**: State\n**Difficulty**: Medium\n**Goal**: 事件处理。\n**AC**:\n- [ ] Focus 切换。'},
{title: '[State] 设置标题和紧急通知', labels: ['state', 'notify'], body: '**Phase**: State\n**Difficulty**: Easy\n**Goal**: 标题设置。\n**AC**:\n- [ ] 铃声提醒。'},
{title: '[State] 支持屏幕保护和模式切换', labels: ['state', 'mode'], body: '**Phase**: State\n**Difficulty**: Medium\n**Goal**: 模式切换。\n**AC**:\n- [ ] 反显模式。'},
{title: '[LLM] 集成键值数据库日志记录', labels: ['llm', 'db'], body: '**Phase**: LLM\n**Difficulty**: Medium\n**Goal**: 数据库日志。\n**AC**:\n- [ ] LLM 输出存 DB。'},
{title: '[LLM] 实现联网模型实时搜索接口', labels: ['llm', 'network'], body: '**Phase**: LLM\n**Difficulty**: Hard\n**Goal**: 实时搜索。\n**AC**:\n- [ ] API 调用成功。'},
{title: '[LLM] 通过 LLM 生成内容并注入终端', labels: ['llm', 'generate'], body: '**Phase**: LLM\n**Difficulty**: Medium\n**Goal**: 内容注入。\n**AC**:\n- [ ] 终端显示生成文本。'},
{title: '[LLM] NASM 硬件抽象和寄存器操作（FFI hook）', labels: ['llm', 'hardware', 'nasm'], body: '**Phase**: LLM\n**Difficulty**: Hard\n**Goal**: NASM hook。\n**AC**:\n- [ ] 寄存器读写。'},
{title: '[LLM] 用户/LLM 操作硬件测试（e.g., syscall 注入）', labels: ['llm', 'test'], body: '**Phase**: LLM\n**Difficulty**: Hard\n**Goal**: 测试注入。\n**AC**:\n- [ ] Syscall hook 验证。'}
          ];
          for (const task of tasks) {
            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: task.title,
              body: task.body,
              labels: task.labels
            });
          }
          console.log(`Created ${tasks.length} issues!`);
